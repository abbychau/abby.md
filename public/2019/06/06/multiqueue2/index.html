<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.0.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.0" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="CreationsMusicFlower1LOL rerenderedSecond Run Midi Remix (midi version)Second Run Midi Remix (mp3 version)Saber Wing Cure My SoundCloud Paintings">
<meta name="keywords" content="Programming,abbychau,blog,PHP,Rust">
<meta property="og:type" content="website">
<meta property="og:title" content="creations">
<meta property="og:url" content="https://blog.abby.md/creations/index.html">
<meta property="og:site_name" content="abby::blog">
<meta property="og:description" content="CreationsMusicFlower1LOL rerenderedSecond Run Midi Remix (midi version)Second Run Midi Remix (mp3 version)Saber Wing Cure My SoundCloud Paintings">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-06-17T02:24:16.520Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="creations">
<meta name="twitter:description" content="CreationsMusicFlower1LOL rerenderedSecond Run Midi Remix (midi version)Second Run Midi Remix (mp3 version)Saber Wing Cure My SoundCloud Paintings">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.0.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.abby.md/creations/">





  <title>The things I tested on a broadcast queue - multiqueue2 | abby::blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">abby::blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Simply Technical Sharing</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-links">
          <a href="/links/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-link"></i> <br>
            
            links
          </a>
        </li>
      
        
        <li class="menu-item menu-item-projects">
          <a href="/projects/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-cube"></i> <br>
            
            projects
          </a>
        </li>
      
        
        <li class="menu-item menu-item-creations">
          <a href="/creations/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-paint-brush"></i> <br>
            
            creations
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.abby.md/2019/06/06/multiqueue2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Abby Chau">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://www.gravatar.com/avatar/17623b699060c78823d7d6c95d1de7ec">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="abby::blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">The things I tested on a broadcast queue - multiqueue2</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-06-06T18:02:21+09:00">2019-06-06</time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>MultiQueue2 is a fast bounded mpmc queue that supports broadcast/broadcast style operations</p>
<p>MultiQueue was developed by Sam Schetterer, but not updated for some time. I found it very useful as it implements futures. However, it is with a few outdated library API and the use of spin locks is taking 100% CPU in many cases.</p>
<h1 id="Stone-Age"><a href="#Stone-Age" class="headerlink" title="Stone Age"></a>Stone Age</h1><p>For any channels, if there is a potential for conflicts (more than one of the writers/readers are consuming the resources), there must be locks. So the 100% issue is very likely to be caused by a spinlock.</p>
<p>At first, I did it in the <code>sleep way</code></p>
<figure class="highlight rs"><figcaption><span>wait.rs</span><a href="https://github.com/abbychau/multiqueue2/blob/a850ed674ccb7c2d47fddcbe72070cca0efa6cc2/src/wait.rs" target="_blank" rel="noopener">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[inline(always)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">check</span></span>(seq: <span class="built_in">usize</span>, at: &amp;AtomicUsize, wc: &amp;AtomicUsize) -&gt; <span class="built_in">bool</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> cur_count = load_tagless(at);</span><br><span class="line">    <span class="keyword">use</span> std::&#123;thread, time&#125;;</span><br><span class="line">    thread::sleep(time::Duration::from_millis(<span class="number">50</span>));</span><br><span class="line">    wc.load(Relaxed) == <span class="number">0</span> || seq == cur_count || past(seq, cur_count).<span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Nonetheless, I sacrified the throughput because I punished every check.</p>
<p>And then, I tried a much <a href="https://github.com/abbychau/multiqueue2/commit/67ff0f3dc8e33467125a7fe6b5a57b25747678eb" target="_blank" rel="noopener">smaller sleep</a>. This is just meaningless because it does not trigger CPU from P-State to S-State. And I immediately find that it may be fool to cocerce S-State in a spinlock design.</p>
<p>And then I tried 1ms,10ms,1000ns, for both settings of <code>check after wait</code> or <code>check before wait</code>. <a href="https://github.com/abbychau/multiqueue2/commit/d3c9403762a34bbe11642419f66658844ec4d75d" target="_blank" rel="noopener">link</a>. It does not make much different.</p>
<p>I tried the <code>_mm_pause</code> from <code>SSE2</code> as well, but it does not make any different. </p>
<figure class="highlight rs"><figcaption><span>wait.rs</span><a href="https://github.com/abbychau/multiqueue2/blob/d82603a08a4d4e0875054e7dd9ac0a63dee928d5/src/wait.rs" target="_blank" rel="noopener">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[inline(always)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">check</span></span>(seq: <span class="built_in">usize</span>, at: &amp;AtomicUsize, wc: &amp;AtomicUsize) -&gt; <span class="built_in">bool</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> cur_count = load_tagless(at);</span><br><span class="line">    <span class="keyword">if</span> is_x86_feature_detected!(<span class="string">"sse2"</span>) &#123;</span><br><span class="line">        <span class="meta">#[cfg(target_arch = <span class="meta-string">"x86"</span>)]</span></span><br><span class="line">        <span class="keyword">use</span> std::arch::x86::_mm_pause;</span><br><span class="line">        <span class="meta">#[cfg(target_arch = <span class="meta-string">"x86_64"</span>)]</span></span><br><span class="line">        <span class="keyword">use</span> std::arch::x86_64::_mm_pause;</span><br><span class="line">        <span class="keyword">unsafe</span>&#123;</span><br><span class="line">            _mm_pause();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">use</span> std::&#123;thread, time&#125;;</span><br><span class="line">        thread::sleep(time::Duration::from_millis(DEFAULT_CHECK_DELAY));</span><br><span class="line">    &#125;</span><br><span class="line">    wc.load(Relaxed) == <span class="number">0</span> || seq == cur_count || past(seq, cur_count).<span class="number">1</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Although <code>_mm_pause</code> is designed for spinlock, but the point is CPU will not switch P-State and S-State just for a few nono-seconds. It is simply not the right way.</p>
<h1 id="Tool-Age"><a href="#Tool-Age" class="headerlink" title="Tool Age"></a>Tool Age</h1><p>Keep trying the trival ways will never proceed more (although it practically solved the system problem of 100% cpu usage in my program and my program is not required to be very performant too), so I stepped back and rethink about my first solution.</p>
<p>The first solution is actually do less checking and force the cpu to sleep, so that it does not waste too much energy to do useless checkings which are 99%(roughly) predictable.</p>
<p>What I really want to punish are the collided conflicts, because they are very likely to be blocked again if the CPU checks in the next cycle. At this time, sleeping is better than checking.</p>
<p>So I make the spinlock to be a swing-back one.</p>
<figure class="highlight rs"><figcaption><span>wait.rs</span><a href="https://github.com/abbychau/multiqueue2/blob/74dd8254c6c6f8f4148ef2be9d4f8ed9d89e124d/src/wait.rs" target="_blank" rel="noopener">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[inline(always)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">check</span></span>(seq: <span class="built_in">usize</span>, at: &amp;AtomicUsize, wc: &amp;AtomicUsize) -&gt; <span class="built_in">bool</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> cur_count = load_tagless(at);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> wc.load(Relaxed) == <span class="number">0</span> || seq == cur_count || past(seq, cur_count).<span class="number">1</span> &#123;</span><br><span class="line">        <span class="literal">true</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">use</span> std::&#123;thread, time&#125;;</span><br><span class="line">        thread::sleep(time::Duration::from_millis(DEFAULT_CHECK_DELAY));</span><br><span class="line">        <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This works exactly as expected. The cpu usage lowered and the through-put is able to pass all the tests.</p>
<h1 id="Futures"><a href="#Futures" class="headerlink" title="Futures"></a>Futures</h1><p>I then find that the CPU usage is high for future queues. I found that that there is a kind of hybrid lock used for future queues. </p>
<p>Therefore, I removed all the Spin before going to <code>parking_lot::Mutex::new(VecDeque::new())</code>. <a href="https://github.com/abbychau/multiqueue2/commit/f311c7c02c392a656df85d662f8b3c1048536457" target="_blank" rel="noopener">link</a></p>
<p>It increases the low level context switches much but indeed lowed the CPU usage. By the nature of this heavy switch comparing to the light weight spinlock, the through-put of future queues becomes just 1/10 of the normal queue.</p>
<h1 id="No-Silver-Bullet"><a href="#No-Silver-Bullet" class="headerlink" title="No Silver Bullet"></a>No Silver Bullet</h1><p>I really would like to come up with an equation for people to set the <code>try_spins</code> precisely, but it is very complicated because it includes all the envirnment information like CPU frequency, number of consumers, rate of feeding, etc.</p>
<p>So I can just left it to the user.</p>
<figure class="highlight rs"><figcaption><span>multiqueue.rs</span><a href="https://github.com/abbychau/multiqueue2/blob/master/src/multiqueue.rs" target="_blank" rel="noopener">link</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// Usage: futures_multiqueue_with(`capacity`,`try_spins`,`yield_spins`)</span></span><br><span class="line"><span class="comment">/// `capacity` is the maximum item to be allowed in queue; when it is full, `Err(Full&#123;...&#125;)` will be emitted</span></span><br><span class="line"><span class="comment">/// `try_spins` is a performant, low latency blocking wait for lightweight conflict solving, lower this number when your CPU usage is high.</span></span><br><span class="line"><span class="comment">/// `yield_spins` is still busy but slowered by `yield()`, this number can be small.</span></span><br><span class="line"><span class="comment">///</span></span><br><span class="line"><span class="comment">/// `futures_multiqueue_with(1000,0,0)` is possible, which  will turn this hybrid-lock into a kernal lock.</span></span><br><span class="line"><span class="comment">/// Feel free to test different setting that matches your system.</span></span><br><span class="line"><span class="keyword">pub</span> <span class="function"><span class="keyword">fn</span> <span class="title">futures_multiqueue_with</span></span>&lt;RW: QueueRW&lt;T&gt;, T&gt;(</span><br><span class="line">    capacity: Index,</span><br><span class="line">    try_spins: <span class="built_in">usize</span>,</span><br><span class="line">    yield_spins: <span class="built_in">usize</span>,</span><br><span class="line">) -&gt; (FutInnerSend&lt;RW, T&gt;, FutInnerRecv&lt;RW, T&gt;) &#123;</span><br><span class="line">    <span class="keyword">let</span> cons_arc = Arc::new(FutWait::with_spins(try_spins, yield_spins));</span><br><span class="line">    <span class="keyword">let</span> prod_arc = Arc::new(FutWait::with_spins(try_spins, yield_spins));</span><br><span class="line">    <span class="keyword">let</span> (tx, rx) = MultiQueue::new_internal(capacity, cons_arc.clone());</span><br><span class="line">    <span class="keyword">let</span> ftx = FutInnerSend &#123;</span><br><span class="line">        writer: tx,</span><br><span class="line">        wait: cons_arc.clone(),</span><br><span class="line">        prod_wait: prod_arc.clone(),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> rtx = FutInnerRecv &#123;</span><br><span class="line">        reader: rx,</span><br><span class="line">        wait: cons_arc.clone(),</span><br><span class="line">        prod_wait: prod_arc.clone(),</span><br><span class="line">    &#125;;</span><br><span class="line">    (ftx, rtx)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Feel free to leave issues or comments.</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/multiqueue/" rel="tag"># multiqueue</a>
          
            <a href="/tags/queue/" rel="tag"># queue</a>
          
            <a href="/tags/mpmc/" rel="tag"># mpmc</a>
          
            <a href="/tags/broadcast/" rel="tag"># broadcast</a>
          
            <a href="/tags/lockless/" rel="tag"># lockless</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/05/24/Mio-Based-Coroutine-Libs/" rel="next" title="Mio Based Coroutine Libs">
                <i class="fa fa-chevron-left"></i> Mio Based Coroutine Libs
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://www.gravatar.com/avatar/17623b699060c78823d7d6c95d1de7ec" alt="Abby Chau">
            
              <p class="site-author-name" itemprop="name">Abby Chau</p>
              <p class="site-description motion-element" itemprop="description">Sharing different computer parts</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/abbychau" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:i@abby.md" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://soundcloud.com/abbychau" target="_blank" title="SoundCloud">
                      
                        <i class="fa fa-fw fa-soundcloud"></i>SoundCloud</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://twitter.com/abbychau" target="_blank" title="Twitter">
                      
                        <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.facebook.com/zkizabby" target="_blank" title="FB Page">
                      
                        <i class="fa fa-fw fa-facebook"></i>FB Page</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://youtube.com/abbychau" target="_blank" title="YouTube">
                      
                        <i class="fa fa-fw fa-youtube"></i>YouTube</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://instagram.com/abbychau2000" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-instagram"></i>Instagram</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/abbychau" target="_blank" title="ZhiHu">
                      
                        <i class="fa fa-fw fa-question"></i>ZhiHu</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Stone-Age"><span class="nav-number">1.</span> <span class="nav-text">Stone Age</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Tool-Age"><span class="nav-number">2.</span> <span class="nav-text">Tool Age</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Futures"><span class="nav-number">3.</span> <span class="nav-text">Futures</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#No-Silver-Bullet"><span class="nav-number">4.</span> <span class="nav-text">No Silver Bullet</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Abby Chau</span>

  

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Gemini</a> v6.0.0</div>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv">This site is visited<span id="busuanzi_value_site_pv"></span>times.</span>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.0"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
